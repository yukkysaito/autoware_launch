<launch>
  <arg name="input_route_topic_name" default="/planning/mission_planning/route" />
  <arg name="map_topic_name" default="/map/vector_map" />

  <executable cmd="ros2 topic pub /planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/path_change_approval
                   autoware_planning_msgs/msg/Approval 'approval: true' -r 10"/>

  <node pkg="behavior_path_planner" exec="behavior_path_planner" name="behavior_path_planner" output="screen">
    <remap from="~/input/route" to="$(var input_route_topic_name)" />
    <remap from="~/input/vector_map" to="$(var map_topic_name)" />
    <remap from="~/input/perception" to="/perception/object_recognition/objects" />
    <remap from="~/input/velocity" to="/localization/twist" />
    <remap from="~/input/external_approval" to="/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/path_change_approval" />
    <remap from="~/input/force_approval" to="/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/path_change_force" />
    <remap from="~/output/path" to="path_with_lane_id" />
    <remap from="~/output/ready" to="/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/ready_module" />
    <remap from="~/output/running" to="/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/running_modules" />
    <remap from="~/output/force_available" to="/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/force_available" />
    <remap from="~/output/turn_signal_cmd" to="/planning/turn_signal_decider/turn_signal_cmd" />
    <param from="$(find-pkg-share planning_launch)/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/side_shift/side_shift.param.yaml" />
    <param from="$(find-pkg-share planning_launch)/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/avoidance/avoidance.param.yaml" />
    <param from="$(find-pkg-share planning_launch)/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/lane_following/lane_following.param.yaml" />
    <param from="$(find-pkg-share planning_launch)/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/lane_change/lane_change.param.yaml" />
    <param from="$(find-pkg-share planning_launch)/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/behavior_path_planner.param.yaml" />
    <param name="bt_tree_config_path" value="$(find-pkg-share behavior_path_planner)/config/behavior_path_planner_tree.xml"/>
  </node>

  <include file="$(find-pkg-share behavior_velocity_planner)/launch/behavior_velocity_planner.launch.xml">
  </include>

</launch>
